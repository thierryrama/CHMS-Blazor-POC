@inherits CultureChangeAwareLayout

@inject IStringLocalizer<MainLayout> Loc
@inject IJSRuntime JS
@inject CultureManager CultureManager

<Radzen.Blazor.RadzenDialog />
<MudThemeProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="0">
	    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
	    <SiteSelector/>
	    <CurrentSite/>
        <MudSpacer />
        <SignedInUser/>
    </MudAppBar>
	<MudDrawer @bind-Open="_drawerOpen" Elevation="1">
		<MudDrawerHeader LinkToIndex="true" Class="flex-column">
			<MudImage Src="./sig-blk-en.svg"/>
			<MudText Typo="Typo.h6">
				@Loc["AppName"]
			</MudText>
		</MudDrawerHeader>
		<MudText Class="pe-6" Align="Align.Right">
			<CultureSelector CurrentCulture="@CultureManager.CurrentCulture" SupportedCultures="@CultureManager.SupportedCultures"/>
		</MudText>
		<MudDivider Class="my-2"/>
		<NavMenu/>
	</MudDrawer>
	<MudMainContent>
		<MudContainer MaxWidth="MaxWidth.Large">
			@Body
		</MudContainer>
		<footer>
			<MudPaper Square="true" Elevation="0" Class="mt-4" Style="@($"height: {_theme.LayoutProperties.AppbarHeight}; background: #26374a url('./theme-gc-web/assets/landscape.png') no-repeat right bottom;")"/>
			<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
				<MudGrid>
					<MudItem xs="6" Class="d-md-none d-lg-none">To the top</MudItem>
					<MudItem xs="6" md="12">
						<MudText Align="Align.Right">
							<MudImage Height="40" Src="./theme-gc-web/assets/wmms-blk.svg" Alt="Symbol of the Government of Canada"/>
						</MudText>
					</MudItem>
				</MudGrid>
			</MudContainer>
		</footer>
	</MudMainContent>
</MudLayout>

@code {
	private readonly MudTheme _theme = new();
	
	private bool _drawerOpen = true;

	void DrawerToggle()
	{
		_drawerOpen = !_drawerOpen;
	}
}
